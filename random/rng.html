<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Roulette — Red / Black</title>
<style>
  :root {
    --bg:#061226;
    --panel:#0e2433;
    --accent:#ffbf00;
    --muted:#8da6c1;
    --red:#e24b4b;
    --black:#111827;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
    background:radial-gradient(800px 400px at 10% 10%,rgba(255,255,255,0.02),transparent 6%),linear-gradient(180deg,#04101b 0%,#071825 100%);
    color:#eaf6ff;
  }
  .wrap{max-width:950px;margin:auto;padding:18px;display:grid;grid-template-columns:1fr 350px;gap:16px}
  header{grid-column:1/-1;margin-bottom:10px}
  h1{margin:0;color:var(--accent);font-size:22px}
  .panel{background:rgba(255,255,255,0.03);border-radius:12px;padding:14px;box-shadow:0 8px 28px rgba(0,0,0,0.5)}
  .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:10px}
  input[type=number]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.05);background:transparent;color:inherit;width:100px}
  button{background:var(--accent);border:none;padding:8px 12px;border-radius:8px;color:#04101b;font-weight:700;cursor:pointer;box-shadow:0 8px 16px rgba(0,0,0,0.4);transition:transform .08s}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.07);color:inherit}
  button:active{transform:scale(.97)}
  .status{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .balance{font-weight:800;font-size:18px}
  .message{padding:10px;border-radius:8px;background:rgba(255,255,255,0.03);margin-top:10px;text-align:center}
  .wheel-wrap{display:flex;align-items:center;justify-content:center;padding:12px}
  canvas#wheel{max-width:100%;border-radius:999px;display:block}
  .bet-buttons{display:flex;gap:8px;margin-bottom:8px}
  .bet-buttons button{flex:1}
  .selected{outline:3px solid var(--accent)!important;box-shadow:0 0 18px rgba(255,191,0,0.5)!important;transform:scale(1.02)!important}
  .small{font-size:13px;color:var(--muted)}
  footer{grid-column:1/-1;text-align:center;margin-top:10px;color:var(--muted);font-size:12px}
  @media(max-width:850px){.wrap{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <header><h1>Roulette — Red / Black</h1></header>

  <section class="panel">
    <div class="controls">
      <label>Starting Balance</label>
      <input id="startBalance" type="number" min="1" value="1000">
      <button id="setBalance">Set</button>
      <div style="margin-left:auto" class="balance">Balance: $<span id="balanceDisplay">1000</span></div>
    </div>

    <div class="controls">
      <label>Bet</label>
      <input id="betInput" type="number" min="1" value="10">
      <button id="halfBtn" class="ghost">Half</button>
      <button id="doubleBtn" class="ghost">Double</button>
      <div style="margin-left:auto" class="small">Music: <button id="musicBtn" class="ghost">On</button></div>
    </div>

    <div class="bet-buttons">
      <button id="betRed" style="background:var(--red);color:#fff">Bet Red</button>
      <button id="betBlack" style="background:var(--black);color:#fff">Bet Black</button>
    </div>

    <div class="controls">
      <button id="spinBtn">Spin</button>
      <button id="resetBtn" class="ghost">Reset</button>
    </div>

    <div class="message" id="message">Pick Red or Black, set your bet, then press Spin.</div>
  </section>

  <aside class="panel">
    <div class="wheel-wrap"><canvas id="wheel" width="400" height="400"></canvas></div>
  </aside>

  <footer>Roulette — Red or Black | Works on GitHub Pages</footer>
</div>

<script>
(() => {
  const betInput=document.getElementById('betInput'),
        balanceDisplay=document.getElementById('balanceDisplay'),
        startBalanceEl=document.getElementById('startBalance'),
        setBalanceBtn=document.getElementById('setBalance'),
        halfBtn=document.getElementById('halfBtn'),
        doubleBtn=document.getElementById('doubleBtn'),
        betRed=document.getElementById('betRed'),
        betBlack=document.getElementById('betBlack'),
        spinBtn=document.getElementById('spinBtn'),
        resetBtn=document.getElementById('resetBtn'),
        messageEl=document.getElementById('message'),
        musicBtn=document.getElementById('musicBtn'),
        canvas=document.getElementById('wheel'),
        ctx=canvas.getContext('2d');

  let balance=+localStorage.getItem('rb_balance')||1000;
  let bet=+betInput.value||10;
  let selected=null;
  let spinning=false;
  let musicOn=localStorage.getItem('rb_music')!=='0';
  const segCount=36;
  const cx=canvas.width/2,cy=canvas.height/2,r=180;
  let rotation=0;
  let winnerIndex=null;

  const music=new Audio("data:audio/mpeg;base64,//uQZAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCA...");
  music.loop=true; music.volume=0.2;

  function drawWheel(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const ang=(Math.PI*2)/segCount;
    for(let i=0;i<segCount;i++){
      ctx.beginPath();
      ctx.moveTo(cx,cy);
      ctx.arc(cx,cy,r,i*ang+rotation,(i+1)*ang+rotation);
      ctx.closePath();
      ctx.fillStyle=i%2?"#111":"#e24b4b";
      ctx.fill();
      if(winnerIndex===i){
        ctx.lineWidth=5;
        ctx.strokeStyle="yellow";
        ctx.stroke();
      }
    }
    ctx.beginPath();
    ctx.arc(cx,cy,30,0,Math.PI*2);
    ctx.fillStyle="#000"; ctx.fill();
    ctx.beginPath();
    ctx.moveTo(cx,cy-r-4);ctx.lineTo(cx-12,cy-r+20);ctx.lineTo(cx+12,cy-r+20);
    ctx.closePath(); ctx.fillStyle="#fff";ctx.fill();
  }

  function updateUI(){
    balanceDisplay.textContent=balance;
    betInput.value=bet;
    musicBtn.textContent=musicOn?"On":"Off";
  }
  function setMessage(m){messageEl.textContent=m;}
  function save(){localStorage.setItem('rb_balance',balance);}
  function highlight(){
    betRed.classList.toggle("selected",selected==="red");
    betBlack.classList.toggle("selected",selected==="black");
  }

  function spinWheel(winningColor,callback){
    if(spinning)return;
    spinning=true;
    winnerIndex=null;
    const angPer=(Math.PI*2)/segCount;
    // choose a segment that matches color
    const possible=[];
    for(let i=0;i<segCount;i++){if((i%2?"black":"red")===winningColor)possible.push(i);}
    const chosen=possible[Math.floor(Math.random()*possible.length)];
    const spins=5+Math.random()*2;
    const targetAngle=(Math.PI/2)-(chosen*angPer+angPer/2);
    const start=rotation;
    const total=start+spins*Math.PI*2+(targetAngle-start%(Math.PI*2));
    const dur=3000;
    const t0=performance.now();
    (function frame(t){
      const p=Math.min(1,(t-t0)/dur);
      const ease=1-Math.pow(1-p,3);
      rotation=start+(total-start)*ease;
      drawWheel();
      if(p<1)requestAnimationFrame(frame);
      else{spinning=false;winnerIndex=chosen;drawWheel();callback(winningColor);}
    })(t0);
  }

  betRed.onclick=()=>{selected="red";highlight();setMessage("Selected RED");};
  betBlack.onclick=()=>{selected="black";highlight();setMessage("Selected BLACK");};

  spinBtn.onclick=()=>{
    if(spinning)return;
    if(!selected){setMessage("Pick Red or Black first");return;}
    bet=Math.min(balance,Math.max(1,+betInput.value||1));
    if(balance<=0){setMessage("No balance");return;}
    balance-=bet;save();updateUI();
    const winningColor=Math.random()<0.5?"red":"black";
    spinWheel(winningColor,(result)=>{
      if(result===selected){balance+=bet*2;setMessage("You won! Landed "+result.toUpperCase());}
      else{setMessage("You lost! Landed "+result.toUpperCase());}
      save();updateUI();
    });
  };

  halfBtn.onclick=()=>{bet=Math.max(1,Math.floor(bet/2));betInput.value=bet;setMessage("Bet halved to "+bet);};
  doubleBtn.onclick=()=>{bet=Math.min(balance,Math.floor(bet*2));betInput.value=bet;setMessage("Bet doubled to "+bet);};
  setBalanceBtn.onclick=()=>{balance=Math.max(1,+startBalanceEl.value||1000);save();updateUI();setMessage("Balance set to "+balance);};
  resetBtn.onclick=()=>{balance=1000;save();updateUI();setMessage("Balance reset");};
  musicBtn.onclick=()=>{musicOn=!musicOn;localStorage.setItem('rb_music',musicOn?'1':'0');updateUI();if(musicOn)music.play().catch(()=>{});else music.pause();};
  window.addEventListener('pointerdown',()=>{if(musicOn)music.play().catch(()=>{});},{once:true});

  drawWheel();updateUI();
})();
</script>
</body>
</html>
